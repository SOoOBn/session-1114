# session-1114


# Grant 4가지 인증 방식과 적용되는 사례


## 1. Authorization Code Grant (권한 부여 승인 코드 방식)


- 사용자가 서비스 제공자에게 로그인하고 권한 부여 후, 클라이언트에게 Autorization code 제공
  
- 클라이언트는 이 코드를 사용하여 access token과 refresh token을 얻음
  
- refresh token으로 access token 재발급 가능
  
- 중간자 공격에 대해 비교적으로 안전하고 refresh token의 사용으로 보안성 강화
  

### 사례


→ 서버 중심 어플리케이션에서 주로 사용


- 소셜 로그인
  
: 사용자가 웹 애플리케이션에 로그인할 때 구글 계정을 선택하여 인증


### 사용하는 이유


보안성이 높음 : Authorization Code는 사용자가 브라우저에서 인증하고, 클라이언트는 Authorization Code로 서버 간 통신에서 access token을 받음. 그렇기 때문에 access token이 직접 브라우저에 노출되지 않으므로 보안 위험이 줄어듦


## 2. Implicit Grant (암묵적 승인 방식)


- Authorization code 과정 없이 바로 access token을 받음

- 보안 상의 이유로 refresh token 사용하지 않음

- access token이 URL을 통해 전달되므로 노출의 위험이 있음

- 토큰의 유효 기간을 짧게 설정하는 것을 권장
  

### 사례


→ 클라이언트 중심 어플리케이션에서 주로 사용


- SPA(Single Page Application)에서의 인증 (React, Angular)
  
: 뉴스 앱에서 사용자가 구글 계정을 이용해 로그인하고, 페이지를 새로고침하지 않아도 데이터를 즉시 가져옴.


### 사용하는 이유


1) 토큰 교환의 간소화 : Implicit Grant는 Access Token을 직접 브라우저에 반환하므로 Authorization Code 단계를 생략
   
2) 빠른 구현 : SPA처럼 클라이언트-중심 애플리케이션에서 사용되며, 백엔드가 필요 없는 구조에서 유용


+) 토큰이 브라우저에 노출될 가능성 때문에 현재는 잘 쓰이지 않음


## 3. Resource Owner Password Credentials Grant (자원 소유자 자격 증명 승인 방식)


- 사용자의 username과 password를 직접 사용하여 access token을 얻음

- refresh token 사용 가능

- 사용자의 자격 증명을 직접 사용하기 때문에, 매우 신중하게 사용되어야 함


### 사례


→ 사용자와 서비스 제공자 간의 높은 신뢰 관계가 있는 경우

→ 주로 레거시 시스템이나 빠른 구현이 필요한 경우에 사용


- 모바일 앱에서 직접 로그인 (자체 인증 시스템)
  
: 기업 내부용 앱에서 직원이 사내 이메일과 비밀번호로 로그인하여 특정 리소스에 접근


### 사용하는 이유


1) 간단한 인증 흐름 : 사용자의 자격 증명(아이디/비밀번호)을 클라이언트가 직접 받아 인증 서버로 전달해 Access Token을 발급받음

2) 신뢰된 클라이언트 : 회사 내부용 앱이나 신뢰된 환경에서 사용.


+) 그러나 보안상 사용자의 비밀번호가 클라이언트에 노출되므로 권장되지 않음


##  4. Client Credentials Grant


- 클라이언트가 자신의 client_id와 client_secret을 사용하여 access token을 얻음

- 리소스 소유자의 개입 없이 클라이언트가 직접 권한 부여받음

- 클라이언트 자격증명을 사용하기 떄문에, 클라이언트의 보안 관리가 중요


### 사례


→ 클라이언트 자체의 리소스에 접근할 때

→ 토큰이 클라이언트 ID와 비밀 키(Client Secret)로 발급되므로 안전한 서버 환경에서만 사용


- 서버 간 데이터 통신 (결제 API 호출)
: 전자상거래 플랫폼이 자체적으로 관리하는 백엔드 서버에서 결제 서비스(API)를 호출하여 결제 정보를 처리


### 사용하는 이유


1) 사용자 불필요 : 이 방식은 특정 사용자가 아닌 애플리케이션 자체에 대한 인증을 제공
  
2) 머신 투 머신 통신 : 백엔드 서버 간 통신에서 사용되며, 사용자 개입 없이 애플리케이션이 API를 호출할 때 유용



